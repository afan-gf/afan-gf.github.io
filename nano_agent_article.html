<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Voice Agent - Article</title>
    <!-- Include Marked.js library for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            background-color: #f5f5f5;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        nav {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        .nav-links li a {
            text-decoration: none;
            color: #333;
            font-size: 16px;
        }

        .nav-links li a:hover {
            text-decoration: underline;
        }

        .back-button {
            padding: 10px 20px;
            background-color: #000;
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px;
        }

        .article-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .article-container h1 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #000;
        }

        .article-container h2 {
            font-size: 24px;
            margin: 30px 0 15px 0;
            color: #000;
        }

        .article-container p {
            font-size: 18px;
            margin-bottom: 20px;
            color: #444;
        }

        .article-container ul, .article-container ol {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .article-container li {
            margin-bottom: 10px;
            font-size: 18px;
            color: #444;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #666;
        }

        .error {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #d32f2f;
            background-color: #ffebee;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
            }
            
            .article-container {
                padding: 20px;
                margin: 20px;
            }
            
            .article-container h1 {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Afan's Log</div>
        <nav>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Research</a></li>
                <li><a href="#">Archives</a></li>
                <li><a href="#">Projects</a></li>
                <li><a href="#">FAQ</a></li>
            </ul>
            <button class="back-button" onclick="window.location.href='index.html'">Back to Home</button>
        </nav>
    </header>

    <main>
        <div class="article-container">
            <div id="content">
                <div class="loading">Loading content...</div>
            </div>
        </div>
    </main>

    <script>
        // Embedded Markdown content
        const markdownContent = `# Nano Voice Agent

Nano Voice Agent is an intelligent voice chat agent that enables natural conversation with AI using voice input and output. It integrates speech recognition, natural language processing, text-to-speech synthesis, and various tools to create a comprehensive voice interaction experience.

## Features

- **Voice Interaction**: Full voice-based conversation with automatic speech recognition (ASR) and text-to-speech (TTS)
- **Multi-Turn Conversation**: Multi-turn conversation with working momery
- **Natural Language Understanding**: Powered by large language models for contextual understanding
- **Visual Capabilities**: Integration with camera for image capture and vision-language model analysis
- **Web Search**: Real-time information retrieval from Baidu and Google
- **Session Management**: Intelligent session handling with timeout and context management
- **Content Safety**: Text guardrails for content filtering and safety
- **Speaker Verification**: Optional speaker verification for personalized experience
- **Real-time Audio Processing**: Voice activity detection (VAD) and audio streaming

## Architecture

The system consists of several key components:

1. **VoiceChatAgent**: Main orchestrator managing the complete voice interaction workflow
2. **Audio Processing**: AudioRecorder and AudioPlayer for handling input/output audio
3. **Speech Components**: ASR, VAD, TTS, and SpeakerVerification for speech processing
4. **AI Models**: LLM (Large Language Model) and VLM (Vision-Language Model) for intelligence
5. **Tools**: Web search engine integration for up-to-date information
6. **Memory Management**: WorkMemory and SessionManager for context handling
7. **Safety**: TextGuardrail for content filtering

## Requirements

- Python 3.10+
- Audio libraries: PyAudio, webrtcvad, pygame, edge-tts
- Speech recognition: funasr, modelscope
- Computer vision: opencv-python
- Web libraries: requests, beautifulsoup4
- AI libraries: openai, dashscope
- Search tools: baidusearch, googlesearch-python

## Installation from git repo

1. Clone the repository:
\`\`\`bash
git clone https://github.com/afan-gf/nano_voice_agent.git
cd nano_voice_agent
\`\`\`

2. Install dependencies:
\`\`\`bash
pip install -r requirements.txt
\`\`\`

3. Configure the system by creating a [config.py] file with necessary API keys and settings.
export your API-KEY
\`\`\`bash
export DASHSCOPE_API_KEY=your_dashscope_api_key
\`\`\`

## Usage

Run the voice agent:
\`\`\`bash
python nano_agent.py
\`\`\`
The agent will start listening for voice input. Speak naturally and wait for the AI response.

## Configuration

Key configuration parameters include:

- API keys for LLM, VLM, and other services
- Audio settings (sample rate, chunk size, etc.)
- Model parameters (model names, system prompts)
- Session management (timeout, end phrases)
- Safety settings (language filters, character patterns)
- Camera settings (device index, warmup parameters)
- Search settings (timeout, result count)

## Tools

The agent supports two main tools:

1. **Vision Analysis**: Capture images and analyze them with a vision-language model
2. **Web Search**: Search the web for up-to-date information using Baidu or Google

## Safety Features

- Text guardrails to filter unsafe content
- Language detection and filtering
- Special character removal
- Emoji and symbol filtering

## Contributing

Contributions are welcome! Please feel free to submit issues and pull requests.

## License

This project is licensed under the MIT License - see the LICENSE file for details.
`;

        // Function to load and display Markdown content
        async function loadArticleContent() {
            const contentElement = document.getElementById('content');
            
            try {
                // Convert Markdown to HTML using marked.js
                const htmlContent = marked.parse(markdownContent);
                
                // Insert the HTML content into the page
                contentElement.innerHTML = htmlContent;
                
            } catch (error) {
                console.error('Error loading article:', error);
                contentElement.innerHTML = `
                    <div class="error">
                        <h2>Error Loading Content</h2>
                        <p>Unable to load the article content. Please try again later.</p>
                        <p><small>Error: ${error.message}</small></p>
                    </div>
                `;
            }
        }
        
        // Load the article content when the page loads
        document.addEventListener('DOMContentLoaded', loadArticleContent);
    </script>
</body>
</html>
